
No.Principle
1.There is more than meets the eye. Consider all points of view.
2.Distinguish between what we see and what we do not see.
3.There are always ways to gain more information. Understand the target.


```
What can we see?
What reasons can we have for seeing it?
What image does what we see create for us?
What do we gain from it?
How can we use it?
What can we not see?
What reasons can there be that we do not see?
What image results for us from what we do not see?
```



![[../../attchments/Pasted image 20250922130922.png]]

## Layer No.1: Internet Presence


we use different
techniques to find domains, subdomains, netblocks, and many other components and
information that present the presence of the company and its infrastructure on the Internet.

`The goal of this layer is to identify all possible target systems and interfaces that can be tested.`

## Layer No.2: Gateway

In this we will try to identify what security measures(DMZ,firewalls,VPN etc) the rechable target is taking and understading them

`The goal is to understand what we are dealing with and what we have to watch out for`

## Layer No.3: Accessible Services

In this will try to indentify the services runnig on target like ports etc We will try to understand why admin has installed those services and how we can communicate with them

`This layer aims to understand the reason and functionality of the target system and gain the necessary knowledge to communicate with it and exploit it for our purposes effectivel`


## Layer No.4: Processes

The goal here is to understand these factors and identify the dependencies
between them

## Layer No.5: Privileges

Each service runs through a specific user in a particular group with permissions and
privileges defined by the administrator or the system

## Layer No.6: OS Setup

```
The goal here is to see how the administrators manage the systems and what
sensitive internal information we can glean from them
```


# Domain Information

`crt.sh`

```
curl -s https://crt.sh/\?q\=inlanefreight.com\&output\=json | jq . | grep
name | cut -d":" -f2 | grep -v "CN=" | cut -d'"' -f2 | awk
'{gsub(/\\n/,"\n");}1;' | sort -u
```

the above comamdn will display subdoamisn in an clean format using crt.sh

## Company Hosted Servers

`host`

```
for i in $(cat subdomainlist);do host $i | grep "has address" | grep
inlanefreight.com | cut -d" " -f1,4;done
```

this command will run all the subdomins to host command and print thier servers Ip address


`shodan and host`

```
for i in $(cat subdomainlist);do host $i | grep "has address" | grep
inlanefreight.com | cut -d" " -f4 >> ip-addresses.txt;done
for i in $(cat ip-addresses.txt);do shodan host $i;done
```

the above command will take all the ips and gave it to shodan to run and get info

## DNS Records

```
dig any inlanefreight.com
```

- A records: We recognize the IP addresses that point to a specific (sub)domain through
the A record. Here we only see one that we already know.

- MX records: The mail server records show us which mail server is responsible for
managing the emails for the company. Since this is handled by google in our case, we
should note this and skip it for now.

- NS records: These kinds of records show which name servers are used to resolve the
FQDN to IP addresses. Most hosting providers use their own name servers, making it
easier to identify the hosting provider.

- TXT records: this type of record often contains verification keys for different third-party
providers and other security aspects of DNS, such as SPF, DMARC, and DKIM


## Cloud Resourses

This often starts with the S3
buckets (AWS), blobs (Azure), cloud storage (GCP), which can be accessed without
authentication if configured incorrectly.

Google Dorks inurl: and intext

google dorks to find s3 amazonaws bukets

## Target Website - Source Code

domain.glass

GrayHatWarfare
discover AWS, Azure, and GCP cloud storage

# Staff

Go t linkdin find employess job postion understand reqiesutires technologies and go to thiers profiles and thiers github repos to find instersting stuff

# FTP

First, the client and
server establish a control channel through TCP port 21 . The client sends commands to the
server, and the server returns status codes. Then both communication participants can
establish the data channel via TCP port 20 . This channel is used exclusively for datatransmission

`FTP Commands`
https://web.archive.org/web/20230326204635/https://www.smartfile.com/blog/the-ultimate-ftp-commands-list/

## TFTP

Works on UDP 

| Command     | Description                                                                                                                            |
| ----------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| **connect** | Sets the remote host, and optionally the port, for file transfers.                                                                     |
| **get**     | Transfers a file or set of files from the remote host to the local host.                                                               |
| **put**     | Transfers a file or set of files from the local host onto the remote host.                                                             |
| **quit**    | Exits tftp.                                                                                                                            |
| **status**  | Shows the current status of tftp, including the current transfer mode (ascii or binary), connection status, time-out value, and so on. |
| **verbose** | Turns verbose mode, which displays additional information during file transfer, on or off.                                             |

Default Configuration
One of the most used FTP servers on Linux-based distributions is vsFTPd. The default
configuration of vsFTPd can be found in /etc/vsftpd.conf

## FTP Users

```
cat /etc/ftpusers
```

The above willl diisplay all the ftp users

## Dangerous Settings

|Setting|Description|
|---|---|
|`anonymous_enable=YES`|Allowing anonymous login?|
|`anon_upload_enable=YES`|Allowing anonymous to upload files?|
|`anon_mkdir_write_enable=YES`|Allowing anonymous to create new directories?|
|`no_anon_password=YES`|Do not ask anonymous for password?|
|`anon_root=/home/username/ftp`|Directory for anonymous.|
|`write_enable=YES`|Allow the usage of FTP commands: STOR, DELE, RNFR, RNTO, MKD, RMD, APPE, and SITE?|

## Anonymous Login

```
ftp 10.129.14.136

Name (10.129.14.136:cry0l1t3): anonymous

ftp> ls

ftp> debug
Debugging on (debug=1).
ftp> trace

```
`Recurvisely list directories`
```
ftp> ls -R
```

## Download a File

```
ftp> get Important\ Notes.txt
```

## Download All Available Files

```
wget -m --no-passive ftp://anonymous:[email protected]
```

```
ftp://anonymous:*password*@10.129.14.136/
```

## Upload a File

We can upload rev shell through ftp and execute it through web server to get an shell

```
ftp> put testupload.txt
```

# Footprinting the Service

Nmap Scripting Engine ( NSE ), a set of many different scripts written for specific
services

```
sudo nmap --script-updatedb

sudo nmap -sV -p21 -sC -A 10.129.14.136 --script-trace
```

```
sudo nmap -sV -p21 -sC -A 10.129.14.136
```
`above command helps to riun defalut scripts on the FTP port`


## Service Interaction

```
nc -nv 10.129.14.136 21
```

```
telnet 10.129.14.136 21
```

```
openssl s_client -connect 10.129.14.136:21 -starttls ftp
```
`if the FTP server is running the TLC/SLL encryption then use the above`


# SMB

Server Message Block ( SMB ) is a client-server protocol that regulates access to files and
entire directories and other network resources such as printers, routers, or interfaces
released for the network. Information exchange between different system processes can
also be handled based on the SMB protocol.

The SMB protocol enables the client to communicate with other participants in the same
network to access files or services shared with it on the networ


## Samba

amba implements the
Common Internet File System ( CIFS ) network protocol

. When SMB commands are transmitted over Samba to an older NetBIOS
service, connections typically occur over TCP ports 137 , 138 , and 139 . In contrast, CIFS
operates over TCP port 445 exclusively.

IBM developed an application
programming interface ( API ) for networking computers called the Network Basic
Input/Output System ( NetBIOS ). The NetBIOS API provided a blueprint for an
application to connect and share data with other computers

## Default Configuration


```
cat /etc/samba/smb.conf | grep -v "#\|\;"
```
`to see the config of samba`


## SMBclient - Connecting to the Share

```
smbclient -N -L //10.129.14.128
```
`above will list the shares`

```
smbclient //10.129.14.128/notes
```
`above will give access to the notes share`

## Download Files from SMB

```
smb: \> get prep-prod.txt
```
`above will download the txt file`



**This domain controller provides the workgroup with a
definitive password server. The domain controllers keep track of users and passwords in
their own NTDS.dit and Security Authentication Module ( SAM ) and authenticate each
user when they log in for the first time and wish to access another machine's share


```
Samba Status
```
`command for administrator to see the logins`


## Footprinting the Service

```
sudo nmap 10.129.14.128 -sV -sC -p139,445
```
`this  command will run default scripts on smb port`


## RPCclient

```
rpcclient -U "" 10.129.14.128
```
`above will allow anonymous login to smb`

The rpcclient offers us many different requests with which we can execute specific
functions on the SMB server to get information

| Query                     | Description                                                        |
| ------------------------- | ------------------------------------------------------------------ |
| `srvinfo`                 | Server information.                                                |
| `enumdomains`             | Enumerate all domains that are deployed in the network.            |
| `querydominfo`            | Provides domain, server, and user information of deployed domains. |
| `netshareenumall`         | Enumerates all available shares.                                   |
| `netsharegetinfo <share>` | Provides information about a specific share.                       |
| `enumdomusers`            | Enumerates all domain users.                                       |
| `queryuser <RID>`         | Provides information about a specific user.                        |

We can then use the results to identify the group's RID, which we can then use to retrieve
information from the entire group.


## Rpcclient - Group Information

```
rpcclient $> querygroup 0x201
```
`above command can be used to get the group info thr rid of the group we got from the enumusers`

## Brute Forcing User RIDs

```
for i in $(seq 500 1100);do rpcclient -N -U "" 10.129.14.128 -c "queryuser
0x$(printf '%x\n' $i)" | grep "User Name\|user_rid\|group_rid" && echo
"";done
```

## Impacket - Samrdump.py

```
samrdump.py 10.129.14.128
```
`this will help to Brute force the RIDs`


## SMBmap

```
smbmap -H 10.129.14.128
```

## CrackMapExec

```
crackmapexec smb 10.129.14.128 --shares -u '' -p ''
```

## Enum4Linux-ng - Enumeration

```
./enum4linux-ng.py 10.129.14.128 -A
```


# NFS

Its purpose is to access file systems over a network as if
they were local. However, it uses an entirely different protocol. NFS is used between Linuxand Unix systems. This means that NFS clients cannot communicate directly with SMB
servers.

NFS is based on the Open Network Computing Remote Procedure Call ( ONC-RPC / SUN-
RPC ) protocol exposed on TCP and UDP ports 111 Which uses External Data
Representation ( XDR ) for the system-independent exchange of data

## Default Configuration

```
cat /etc/exports
```
`to see the config of NFS`

|Option|Description|
|---|---|
|`rw`|Read and write permissions.|
|`ro`|Read only permissions.|
|`sync`|Synchronous data transfer. (A bit slower)|
|`async`|Asynchronous data transfer. (A bit faster)|
|`secure`|Ports above 1024 will not be used.|
|`insecure`|Ports above 1024 will be used.|
|`no_subtree_check`|This option disables the checking of subdirectory trees.|
|`root_squash`|Assigns all permissions to files of root UID/GID 0 to the UID/GID of anonymous, which prevents root from accessing files on an NFS mount.|

## Dangerous Settings

|Option|Description|
|---|---|
|`rw`|Read and write permissions.|
|`insecure`|Ports above 1024 will be used.|
|`nohide`|If another file system was mounted below an exported directory, this directory is exported by its own exports entry.|
|`no_root_squash`|All files created by root are kept with the UID/GID 0.|

## Footprinting the Service


```
sudo nmap 10.129.14.128 -p111,2049 -sV -sC
```
`this will run default scripts`

```
sudo nmap --script nfs* 10.129.14.128 -sV -p111,2049
```
`this is run specific scripts for nse and find the directory lisitng and files`

## Show Available NFS Shares

```
showmount -e 10.129.14.128
```
`this will list the moutablle share`

## Mounting NFS Share

```
mkdir target-NFS
sudo mount -t nfs 10.129.14.128:/ ./target-NFS/ -o nolock
cd target-NFS
```

```
ls -l mnt/nfs/
```
`List Contents with Usernames & Group Names`

```
ls -n mnt/nfs/
```
`List Contents with UIDs & GUIDs`


We can also use NFS for further escalation. For example, if we have access to the system
via SSH and want to read files from another folder that a specific user can read, we would
need to upload a shell to the NFS share that has the SUID of that user and then run the
shell via the SSH user.

## Unmounting

```
cd ..
sudo umount ./target-NFS
```


# DNS

Globallydistributed DNS servers translate domain names into IP addresses and thus control which
server a user can reach via a particular domain. There are several types of DNS servers that
are used worldwide:

- DNS root server
- Authoritative name server
- Non-authoritative name server
- Caching server
- Forwarding server
- Resolver

Of course. Here is the expanded table with an added column containing concise, professional definitions suitable for an interview setting.

### DNS Servers Explained for a Technical Interview

| Server Type                      | Simple Explanation (What it does)                                                                                           | Easy Analogy / Example                                                                                                                       | Technical Definition (For an Interview)                                                                                                                                                                                                                                                          |
| -------------------------------- | --------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **DNS Root Server**              | The main index of the internet. It knows where to send requests based on the domain's ending (like `.com` or `.in`).        | You ask, "Where can I find `google.com`?" The Root Server says, "Go talk to the `.com` TLD server."                                          | The Root Server sits at the apex of the DNS hierarchy. Its primary function is to respond to iterative queries for the Top-Level Domain (TLD) by providing a referral to the TLD's authoritative nameservers.                                                                                    |
| **Authoritative Nameserver**     | The ultimate source of truth for a specific domain. It holds the official address record.                                   | The Authoritative Server for `google.com` holds the official record and tells you, "The IP address for `google.com` is **142.250.193.110**." | An Authoritative Nameserver holds and serves the DNS resource records (e.g., A, AAAA, MX, CNAME) for a specific zone. It provides definitive answers to queries about domains under its control and is the ultimate source of truth for that zone's data.                                        |
| **Non-authoritative Nameserver** | A server that gives an answer it learned from another server. The information isn't official but is from a reliable source. | Asking a fellow library visitor who just looked up the book's location. Their answer is correct, but they aren't the official librarian.     | A server that provides a DNS record from its cache rather than from the original source zone file. The response from a non-authoritative server will not have the Authoritative Answer (AA) bit set in its header.                                                                               |
| **Caching DNS Server**           | A server that remembers recent answers to speed things up for everyone.                                                     | Your local librarian keeps a sticky note with the locations of popular books to answer requests instantly.                                   | A server that caches responses to DNS queries for a duration specified by the record's Time-To-Live (TTL). Its purpose is to reduce latency for subsequent queries to the same domain and decrease the load on authoritative nameservers.                                                        |
| **Forwarding Server**            | A server that just passes questions along to another, pre-configured DNS server.                                            | A trainee librarian who doesn't look up answers but instead asks a senior librarian and relays the response back to you.                     | A DNS server configured to pass queries it cannot resolve from its cache to an upstream DNS server, known as a forwarder. This centralizes DNS traffic and can simplify management and security policy enforcement.                                                                              |
| **Resolver**                     | The component on your device or network that starts the whole DNS lookup process for you.                                   | This is **you** or your personal assistant starting the search by going to the front desk and making the initial request.                    | Also known as a Recursive Resolver, this server accepts a hostname query from a client and takes full responsibility for resolving it. It performs a series of iterative queries to the root, TLD, and authoritative servers until it finds the IP address, which it then returns to the client. |

TO encrypt DNS :
DNS over TLS (
DoT ) or DNS over HTTPS ( DoH )

![[../../attchments/Pasted image 20251007142550.png]]

| DNS Record | Description                                                                                                                                                                                                              |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **A**      | Returns a 32-bit IPv4 address of the requested domain.                                                                                                                                                                   |
| **AAAA**   | Returns a 128-bit IPv6 address of the requested domain.                                                                                                                                                                  |
| **MX**     | (Mail Exchanger) Returns the responsible mail servers for the domain.                                                                                                                                                    |
| **NS**     | (Name Server) Returns the authoritative DNS servers for the domain.                                                                                                                                                      |
| **TXT**    | (Text) This record can contain various text-based information. It is commonly used to validate domain ownership (e.g., for Google Search Console, SSL certificates) and for email security protocols like SPF and DMARC. |
| **CNAME**  | (Canonical Name) This record serves as an alias for another domain name. For example, `www.example.com` could be a CNAME pointing to `example.com`.                                                                      |
| **PTR**    | (Pointer) The PTR record performs a reverse lookup, converting an IP address back into its associated domain name.                                                                                                       |
| **SOA**    | (Start of Authority) Provides important administrative information about the DNS zone, such as the primary name server, the email of the domain administrator, and zone transfer timers.                                 |

```
dig soa www.inlanefreight.com
```

## Default Configuration


All DNS servers work with three different types of configuration files:
1. local DNS configuration files
2. zone files
3. reverse name resolution files

[[DNS.md.md|DNS]]

## Reverse Name Resolution Zone Files

```
root@bind9:~# cat /etc/bind/db.10.129.14
```

## Dangerous Settings

| Option            | Description                                                                    |
| ----------------- | ------------------------------------------------------------------------------ |
| `allow-query`     | Defines which hosts are allowed to send requests to the DNS server.            |
| `allow-recursion` | Defines which hosts are allowed to send recursive requests to the DNS server.  |
| `allow-transfer`  | Defines which hosts are allowed to receive zone transfers from the DNS server. |
| `zone-statistics` | Collects statistical data of zones.                                            |

## Footprinting The Server

## DIG

```
dig ns inlanefreight.htb @10.129.14.128
```
`DIG - NS Query`

```
dig CH TXT version.bind 10.129.120.85
```
`DIG - Version Query`

```
DIG - ANY Query
```
`DIG - ANY Query THis will show all the information of the domain`

**Zone Transfer

A DNS Zone Transfer is the process of copying all the DNS records for a domain (like `google.com`) from a main "master" server to backup "slave" servers.

This is done to keep them all synchronized, ensuring that if the main server fails, a backup can take its place without any interruption. The backup servers periodically check if the master has new updates and copy them when they do.

```
dig axfr inlanefreight.htb @10.129.14.128
```
`DIG - AXFR Zone Transfer`

```
dig axfr internal.inlanefreight.htb @10.129.14.128
```
`DIG - AXFR Zone Transfer - Internal`


## Subdomain Brute Forcing

```
for sub in $(cat /opt/useful/seclists/Discovery/DNS/subdomains-
top1million-110000.txt);do dig $sub.inlanefreight.htb @10.129.14.128 |
grep -v ';\|SOA' | sed -r '/^\s*$/d' | grep $sub | tee -a
subdomains.txt;done
```


```
dnsenum --dnsserver 10.129.14.128 --enum -p 0 -s 0 -o subdomains.txt -f
/opt/useful/seclists/Discovery/DNS/subdomains-top1million-110000.txt
inlanefreight.htb
```
`Tools to brute force Subdomains using DNS`

## SMTP

`Theory -->` [[SMPT.md.md|SMPT]]

```
cat /etc/postfix/main.cf | grep -v "#" | sed -r "/^\s*$/d"
```
`Default Config`


```
telnet 10.129.14.128 25
```
`Telnet - HELO/EHLO`


```
telnet 10.129.14.128 25

Trying 10.129.14.128...
Connected to 10.129.14.128.
Escape character is '^]'.
220 ESMTP Server
VRFY root
252 2.0.0 root
VRFY cry0l1t3
252 2.0.0 cry0l1t3
VRFY testuser
252 2.0.0 testuser
```
`The command VRFY can be used to enumerate existing users on the system code 252 and confirm the existence of a user`

## Send an Email

```
elnet 10.129.14.128 25
Trying 10.129.14.128...
Connected to 10.129.14.128.
Escape character is '^]'.
220 ESMTP Server
EHLO inlanefreight.htb
250-mail1.inlanefreight.htb
250-PIPELINING
250-SIZE 10240000
250-ETRN
250-ENHANCEDSTATUSCODES
250-8BITMIME
250-DSN
250-SMTPUTF8
250 CHUNKING
MAIL FROM: <[email protected]>
250 2.1.0 Ok
RCPT TO: <[email protected]> NOTIFY=success,failure
250 2.1.5 Ok
DATA

354 End data with <CR><LF>.<CR><LF>
From: <[email protected]>
To: <[email protected]>
Subject: DB
Date: Tue, 28 Sept 2021 16:32:51 +0200
Hey man, I am trying to access our XY-DB but the creds don't work.
Did you make any changes there?
.
250 2.0.0 Ok: queued as 6E1CF1681AB
QUIT
221 2.0.0 Bye
Connection closed by foreign host.
```

## Dangerous Settings

```
mynetworks = 0.0.0.0/0
```

## Footprint the Service

```
sudo nmap 10.129.14.128 -sC -sV -p25
```
`Running Default Scripts`

```
sudo nmap 10.129.14.128 -p25 --script smtp-open-relay -v
```
`Nmap - Open Relay`


# IMAP / POP3

Of course, here are the IMAP commands from your text organized into a clear table.

## Imap Commands

| Command Example                 | Description                                                                                                 |
| ------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| `1 LOGIN username password`     | User's login.                                                                                               |
| `1 LIST "" *`                   | Lists all directories.                                                                                      |
| `1 CREATE "INBOX"`              | Creates a mailbox with a specified name.                                                                    |
| `1 DELETE "INBOX"`              | Deletes a mailbox.                                                                                          |
| `1 RENAME "ToRead" "Important"` | Renames a mailbox.                                                                                          |
| `1 LSUB "" *`                   | Returns a subset of names from the set of names that the user has declared as being active or "subscribed". |
| `1 SELECT INBOX`                | Selects a mailbox so that messages in the mailbox can be accessed.                                          |
| `1 UNSELECT INBOX`              | Exits the selected mailbox.                                                                                 |
| `1 FETCH <ID> ALL`              | Retrieves data associated with a message in the mailbox.                                                    |
| `1 CLOSE`                       | Removes all messages with the `\Deleted` flag set.                                                          |
| `1 LOGOUT`                      | Closes the connection with the IMAP server.                                                                 |

## POP Commands

| Command         | Description                                                 |
| --------------- | ----------------------------------------------------------- |
| `USER username` | Identifies the user.                                        |
| `PASS password` | Authentication of the user using its password.              |
| `STAT`          | Requests the number of saved emails from the server.        |
| `LIST`          | Requests from the server the number and size of all emails. |
| `RETR id`       | Requests the server to deliver the requested email by ID.   |
| `DELE id`       | Requests the server to delete the requested email by ID.    |
| `CAPA`          | Requests the server to display the server capabilities.     |
| `RSET`          | Requests the server to reset the transmitted information.   |
| `QUIT`          | Closes the connection with the POP3 server.                 |

## Dangerous Settings

| Setting                   | Description                                                                               |
| ------------------------- | ----------------------------------------------------------------------------------------- |
| `auth_debug`              | Enables all authentication debug logging.                                                 |
| `auth_debug_passwords`    | This setting adjusts log verbosity; the submitted passwords and the scheme get logged.    |
| `auth_verbose`            | Logs unsuccessful authentication attempts and their reasons.                              |
| `auth_verbose_passwords`  | Passwords used for authentication are logged and can also be truncated.                   |
| `auth_anonymous_username` | This specifies the username to be used when logging in with the ANONYMOUS SASL mechanism. |

## Footprinting The Service

By default, ports 110 and 995 are used for POP3, and ports 143 and 993 are used for
IMAP. The higher ports ( 993 and 995 ) use TLS/SSL to encrypt the communication
between the client and server

```
sudo nmap 10.129.14.128 -sV -p110,143,993,995 -sC
```
`This will run the Default Scripts it can show you the mail server`

## cCurl

```
curl -k 'imaps://10.129.14.128' --user user:p4ssw0rd
```
`IF you have creds then you can login to the mail server`

## OpenSSl

```
openssl s_client -connect 10.129.14.128:pop3s
```
`OpenSSL - TLS Encrypted Interaction POP3`


```
openssl s_client -connect 10.129.14.128:imaps
```
`OpenSSL - TLS Encrypted Interaction IMAP`


# SNMP

`Theory -->` [[SNMP.md.md|SNMP]]

```
"SNMP, or Simple Network Management Protocol, is a standard protocol used for monitoring and managing devices on a network. Essentially, it allows a central management system to query devices like routers, switches, and servers to check their status, performance, and configuration. It can also be used to remotely make changes to those devices."
```

## Dangerous Settings

Some dangerous settings that the administrator can make with SNMP are:

|**Settings**|**Description**|
|---|---|
|`rwuser noauth`|Provides access to the full OID tree without authentication.|
|`rwcommunity <community string> <IPv4 address>`|Provides access to the full OID tree regardless of where the requests were sent from.|
|`rwcommunity6 <community string> <IPv6 address>`|Same access as with `rwcommunity` with the difference of using IPv6.|


# MySQL




THings We are after

|                         |                  |                   |            |
| ----------------------- | ---------------- | ----------------- | ---------- |
| Headers                 | Texts            | Meta tags         | Forms      |
| Customers               | Usernames        | Administrators    | Moderators |
| Email addresses         | User information | Permissions       | Passwords  |
| External/Internal links | Links to Files   | Specific contents | Values     |

#### MySQL Databases

MySQL is ideally suited for applications such as `dynamic websites`, where efficient syntax and high response speed are essential. It is often combined with a Linux OS, PHP, and an Apache web server and is also known in this combination as [LAMP](https://en.wikipedia.org/wiki/LAMP_\(software_bundle\)) (Linux, Apache, MySQL, PHP), or when using Nginx, as [LEMP](https://lemp.io/).

```shell-session
cat /etc/mysql/mysql.conf.d/mysqld.cnf | grep -v "#" | sed -r '/^\s*$/d'
```
`Default config`

`Dangerous Seetings`

| **Settings**       | **Description**                                                                                              |
| ------------------ | ------------------------------------------------------------------------------------------------------------ |
| `user`             | Sets which user the MySQL service will run as.                                                               |
| `password`         | Sets the password for the MySQL user.                                                                        |
| `admin_address`    | The IP address on which to listen for TCP/IP connections on the administrative network interface.            |
| `debug`            | This variable indicates the current debugging settings                                                       |
| `sql_warnings`     | This variable controls whether single-row INSERT statements produce an information string if warnings occur. |
| `secure_file_priv` | This variable is used to limit the effect of data import and export operations.                              |


# mssql

#### MSSQL Databases

MSSQL has default system databases that can help us understand the structure of all the databases that may be hosted on a target server. Here are the default databases and a brief description of each:

| Default System Database | Description                                                                                                                                                                                            |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `master`                | Tracks all system information for an SQL server instance                                                                                                                                               |
| `model`                 | Template database that acts as a structure for every new database created. Any setting changed in the model database will be reflected in any new database created after changes to the model database |
| `msdb`                  | The SQL Server Agent uses this database to schedule jobs & alerts                                                                                                                                      |
| `tempdb`                | Stores temporary objects                                                                                                                                                                               |
| `resource`              | Read-only database containing system objects included with SQL server                                                                                                                                  |

# Oracle TNS

---

The `Oracle Transparent Network Substrate` (`TNS`) server is a communication protocol that facilitates communication between Oracle databases and applications over networks


NS supports various networking protocols between Oracle databases and client applications, such as `IPX/SPX` and `TCP/IP` protocol stack

## Default Configuration

 `TCP/1521` por

The configuration files for Oracle TNS are called `tnsnames.ora` and `listener.ora` and are typically located in the `$ORACLE_HOME/network/admin` directory

 The Oracle DBSNMP service also uses a default password, `dbsnmp` that we should remember when we come across this one

#### Tnsnames.ora

Code: txt

```txt
ORCL =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 10.129.11.102)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl)
    )
  )
```

Here we can see a service called `ORCL`, which is listening on port `TCP/1521` on the IP address `10.129.11.102`. Clients should use the service name `orcl` when connecting to the service. However, the tnsnames.ora file can contain many such entries for different databases and services. The entries can also include additional information, such as authentication details, connection pooling settings, and load balancing configurations.

#### Listener.ora

Code: txt

```txt
SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PDB1)
      (ORACLE_HOME = C:\oracle\product\19.0.0\dbhome_1)
      (GLOBAL_DBNAME = PDB1)
      (SID_DIRECTORY_LIST =
        (SID_DIRECTORY =
          (DIRECTORY_TYPE = TNS_ADMIN)
          (DIRECTORY = C:\oracle\product\19.0.0\dbhome_1\network\admin)
        )
      )
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = TCP)(HOST = orcl.inlanefreight.htb)(PORT = 1521))
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
  )

ADR_BASE_LISTENER = C:\oracle
```

In short, the client-side Oracle Net Services software uses the `tnsnames.ora` file to resolve service names to network addresses, while the listener process uses the `listener.ora` file to determine the services it should listen to and the behavior of the listener.

Oracle databases can be protected by using so-called PL/SQL Exclusion List (`PlsqlExclusionList`). It is a user-created text file that needs to be placed in the `$ORACLE_HOME/sqldeveloper` directory, and it contains the names of PL/SQL packages or types that should be excluded from execution. Once the PL/SQL Exclusion List file is created, it can be loaded into the database instance. It serves as a blacklist that cannot be accessed through the Oracle Application Server.


We can see that the port is open, and the service is running. In Oracle RDBMS, a System Identifier (`SID`) is a unique name that identifies a particular database instance. It can have multiple instances, each with its own System ID. An instance is a set of processes and memory structures that interact to manage the database's data. When a client connects to an Oracle database, it specifies the database's `SID` along with its connection string. The client uses this SID to identify which database instance it wants to connect to. Suppose the client does not specify a SID. Then, the default value defined in the `tnsnames.ora` file is used.


# IPMI

Intelligent Platform Management Interface (IPMI) is a technology that allows administrators to remotely manage a computer server, even if it's turned off or has crashed.

It works through a dedicated micro-controller on the motherboard called a **Baseboard Management Controller (BMC)**. This controller has its own network connection and power, so it operates independently of the server's main CPU, BIOS, and operating system.

This "out-of-band" access lets you perform critical tasks like:

- Powering the server on or off.
    
- Monitoring hardware health (temperature, fans, voltage).
    
- Accessing the system's console to change BIOS settings or install an OS.
    
Essentially, IPMI gives you control over the server's hardware as if you were physically present.


- Baseboard Management Controller (BMC) - A micro-controller and essential component of an IPMI
- Intelligent Chassis Management Bus (ICMB) - An interface that permits communication from one chassis to another
- Intelligent Platform Management Bus (IPMB) - extends the BMC
- IPMI Memory - stores things such as the system event log, repository store data, and more
- Communications Interfaces - local system interfaces, serial and LAN interfaces, ICMB and PCI Management Bus


# SSH

Secure Shell (SSH) is a protocol used to create a secure, encrypted connection between two computers over an insecure network, typically on **TCP port 22**. It allows for secure remote command-line administration, file transfers, and other network services. The modern and secure version is **SSH-2**, which is resistant to interception attacks that affected the older SSH-1.

---

### Public Key Authentication

This is a common and highly secure method for a client to prove its identity to an SSH server, offering an alternative to passwords.

- **Key Pair:** It relies on a cryptographic key pair: a **private key** and a **public key**.
    
- **Private Key:** This key is kept secret and stored only on your local machine, often protected by a passphrase.
    
- **Public Key:** This key is copied to the server(s) you want to connect to.
    
- **How it Works:** To authenticate, the server uses your public key to create a cryptographic challenge. Only your corresponding private key can solve this challenge. By solving it and sending the solution back, your client proves it has the correct private key, and the server grants access without ever needing a password to be sent over the network. This method is more secure and can be more convenient, as you only need to unlock your private key once per session to access multiple servers.

## Dangerous setings

| **Setting**                  | **Description**                             |
| ---------------------------- | ------------------------------------------- |
| `PasswordAuthentication yes` | Allows password-based authentication.       |
| `PermitEmptyPasswords yes`   | Allows the use of empty passwords.          |
| `PermitRootLogin yes`        | Allows to log in as the root user.          |
| `Protocol 1`                 | Uses an outdated version of encryption.     |
| `X11Forwarding yes`          | Allows X11 forwarding for GUI applications. |
| `AllowTcpForwarding yes`     | Allows forwarding of TCP ports.             |
| `PermitTunnel`               | Allows tunneling.                           |
| `DebianBanner yes`           | Displays a specific banner when logging in. |

# Rsync

**Rsync** is a tool for efficiently copying files, either locally or to a remote server.

### Key Features

- **Delta-Transfer Algorithm**: Its most famous feature. Instead of re-copying an entire file, Rsync only sends the parts that have changed, saving bandwidth and time. This makes it ideal for backups and mirroring.
    
- **Default Port**: It operates on **TCP port 873**.
    
- **Security**: While it can run on its own, it's often configured to work over an **SSH connection** for secure, encrypted transfers.
    

---

### Pentesting & Security Risks

- **Misconfiguration**: Rsync servers can be misconfigured to allow **unauthenticated access**, letting anyone list and download files from shared directories.
    
- **Password Reuse**: If credentials are found during a penetration test, it's crucial to check if they work on an Rsync server. Gaining access could expose sensitive backup files or other critical data.

# R-Services

### What Are R-Services?

**R-Services** are a suite of old Unix programs (`r-commands`) designed for remote access and command execution between Unix systems. Think of them as an early, less secure predecessor to SSH.

---

### Major Security Flaw 

The biggest issue with R-Services is that they transmit **all data, including passwords, in unencrypted cleartext**. This makes them highly vulnerable to Man-in-the-Middle (MITM) attacks, where an attacker can easily sniff network traffic to steal credentials and data. Due to these security risks, they have been largely replaced by **Secure Shell (SSH)**.

---

### Key Details

- **Ports:** They operate over TCP ports **512**, **513**, and **514**.
    
- **Common Commands:**
    
    - `rlogin`: Remote login (like Telnet).
        
    - `rsh`: Remote shell (executes a command on a remote host).
        
    - `rexec`: Remote execution.
        
    - `rcp`: Remote copy (like an insecure version of `scp`).
        
- **Modern Relevance:** While mostly obsolete, they are sometimes still found on older commercial Unix systems (like Solaris, HP-UX, AIX) during internal network penetration tests.


|**Command**|**Service Daemon**|**Port**|**Transport Protocol**|**Description**|
|---|---|---|---|---|
|`rcp`|`rshd`|514|TCP|Copy a file or directory bidirectionally from the local system to the remote system (or vice versa) or from one remote system to another. It works like the `cp` command on Linux but provides `no warning to the user for overwriting existing files on a system`.|
|`rsh`|`rshd`|514|TCP|Opens a shell on a remote machine without a login procedure. Relies upon the trusted entries in the `/etc/hosts.equiv` and `.rhosts` files for validation.|
|`rexec`|`rexecd`|512|TCP|Enables a user to run shell commands on a remote machine. Requires authentication through the use of a `username` and `password` through an unencrypted network socket. Authentication is overridden by the trusted entries in the `/etc/hosts.equiv` and `.rhosts` files.|
|`rlogin`|`rlogind`|513|TCP|Enables a user to log in to a remote host over the network. It works similarly to `telnet` but can only connect to Unix-like hosts. Authentication is overridden by the trusted entries in the `/etc/hosts.equiv` and `.rhosts` files.|

# Windows Remote management protocol

The main components used for remote management of Windows and Windows servers are the following:

- Remote Desktop Protocol (`RDP`)
    
- Windows Remote Management (`WinRM`)
    
- Windows Management Instrumentation (`WMI`)


## RDP

`TCP port 3389`

# WInrm

**Windows Remote Management (WinRM)** is Microsoft's protocol for managing Windows machines remotely using the command line.

It communicates over **TCP port 5985 (HTTP)** or **5986 (HTTPS)**. It works with tools like **Windows Remote Shell (WinRS)** and PowerShell to execute commands and scripts on remote systems. WinRM is enabled by default on modern Windows Server versions but must be manually enabled on client operating systems like Windows 10.

# WMI

**Windows Management Instrumentation (WMI)** is Microsoft's technology for managing and monitoring Windows computers and servers.

Essentially, it's a powerful interface that allows administrators to access, configure, and automate almost any setting on a remote Windows system. Common administrative tools like **PowerShell**, VBScript, and `wmic` use WMI to perform tasks like querying system information, managing services, and running commands.

